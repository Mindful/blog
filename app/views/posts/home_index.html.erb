  <div class="span8 bluebox" id ="post-wrapper">
  	<div id="posts" class="abstract ">
      <%= render @posts %>
    </div>
    <%= link_to('Next page', root_path(:page => @posts.next_page), :class => 'posts-text') if @posts.next_page %>
    <%= link_to('Previous page', root_path(:page => @posts.previous_page), :class => 'posts-text') if @posts.previous_page %>
  </div>
  <!--end posts-->
 
 <%= render 'layouts/sidebar' %>
 <!--this adds an inview event (which fires on in or out of view, hence the needed if (!visible)) to the get more posts link. also changes the link at the bottom to be autloady if we have Javascript-->  
 <script>
  $('.posts-text').remove();
  <% if @posts.next_page %>
    $('#post-wrapper').append('<p id="more-posts" data-posts="<%= root_path(:page => @posts.next_page) %>">Loading more posts...</p>');
  <% end %>
  $(function() {
  return $('#more-posts').on('inview', function(e, visible) { 
    if (!visible) {
      return;
    }
    return $.getScript($(this).attr('data-posts'));
  });
});
</script>
