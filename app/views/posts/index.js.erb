//I believe the reason this needs its own files is so that Ruby adjust the ERB here with every getScript call, and so it can be invoked more than once
//Also, I guess single quotes won't stop ERB from parsing, and are required for the javascript arguments

$('#posts').append('<%= escape_javascript render @posts %>'); 

/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = '<%= DISQUS_SHORTNAME %>'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());



<% if @posts.next_page %>
  loader = $('.post-head:eq(-2)'), loading = false;
  loader.attr('data-posts', '<%= post_next_page_path(@posts) %>');
  <% else %> 
  $('#more-posts').remove();
  self.clearInterval(loaderNumber);
<% end %>
