//I believe the reason this needs its own files is so that Ruby adjust the ERB here with every getScript call
//Also, I guess single quotes won't stop ERB from parsing, and are required for the javascript arguments

//now our problem is errors in the ERB that we can't see. wonderful
alert('index.js called');
$('#posts').append('<%= escape_javascript render @posts %>'); //this line works now
$('a.load-more-posts').attr('href', '<%= root_path page: @posts.next_page %>'); //this works too, except the posts are appended after it, and they need to instead push it further down the page
 
<% unless @posts.next_page %>
  $('a.load-more-posts').remove();
<% end %>

